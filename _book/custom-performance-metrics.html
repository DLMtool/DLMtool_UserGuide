<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 29 Custom Performance Metrics | Data-Limited Methods Toolkit (DLMtool 5.4.2)</title>
  <meta name="description" content="User guide for the DLMtool R package" />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 29 Custom Performance Metrics | Data-Limited Methods Toolkit (DLMtool 5.4.2)" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://dlmtool.github.io/DLMtool/userguide/introduction.html" />
  
  <meta property="og:description" content="User guide for the DLMtool R package" />
  <meta name="github-repo" content="DLMtool/DLMtool" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 29 Custom Performance Metrics | Data-Limited Methods Toolkit (DLMtool 5.4.2)" />
  
  <meta name="twitter:description" content="User guide for the DLMtool R package" />
  

<meta name="author" content="Tom Carruthers &amp; Adrian Hordyk" />


<meta name="date" content="2020-02-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon-16x16.png" type="image/x-icon" />
<link rel="prev" href="subsetting-the-mse-object.html"/>
<link rel="next" href="acknowledgements.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./introduction.html">DLMtool User Guide</a></li>

<li class="divider"></li>
<li class="part"><span><b>Introduction</b></span></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#data-limited-methods-toolkit"><i class="fa fa-check"></i><b>1.1</b> Data-Limited Methods Toolkit</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#management-strategy-evaluation"><i class="fa fa-check"></i><b>1.2</b> Management Strategy Evaluation</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#how-does-management-strategy-evaluation-differ-from-stock-assessment"><i class="fa fa-check"></i><b>1.3</b> How does Management Strategy Evaluation Differ from Stock Assessment?</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#assumed-knowledge"><i class="fa fa-check"></i><b>1.4</b> Assumed Knowledge</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#the-user-manual"><i class="fa fa-check"></i><b>1.5</b> The User Manual</a></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#dlmtool-bug-reports"><i class="fa fa-check"></i><b>1.6</b> DLMtool Bug Reports</a></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#version-notes"><i class="fa fa-check"></i><b>1.7</b> Version Notes</a></li>
</ul></li>
<li class="part"><span><b>Getting Started with DLMtool</b></span></li>
<li class="chapter" data-level="2" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>2</b> Getting Started</a><ul>
<li class="chapter" data-level="2.1" data-path="getting-started.html"><a href="getting-started.html#required-software"><i class="fa fa-check"></i><b>2.1</b> Required Software</a><ul>
<li class="chapter" data-level="2.1.1" data-path="getting-started.html"><a href="getting-started.html#the-r-software"><i class="fa fa-check"></i><b>2.1.1</b> The R Software</a></li>
<li class="chapter" data-level="2.1.2" data-path="getting-started.html"><a href="getting-started.html#rstudio"><i class="fa fa-check"></i><b>2.1.2</b> RStudio</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="getting-started.html"><a href="getting-started.html#installing-dlmtool"><i class="fa fa-check"></i><b>2.2</b> Installing DLMtool</a><ul>
<li class="chapter" data-level="2.2.1" data-path="getting-started.html"><a href="getting-started.html#installing-dlmtool-using-r-console"><i class="fa fa-check"></i><b>2.2.1</b> Installing DLMtool using R Console</a></li>
<li class="chapter" data-level="2.2.2" data-path="getting-started.html"><a href="getting-started.html#installing-dlmtool-in-rstudio"><i class="fa fa-check"></i><b>2.2.2</b> Installing DLMtool in RStudio</a></li>
<li class="chapter" data-level="2.2.3" data-path="getting-started.html"><a href="getting-started.html#updating-the-dlmtool-package"><i class="fa fa-check"></i><b>2.2.3</b> Updating the DLMtool Package</a></li>
<li class="chapter" data-level="2.2.4" data-path="getting-started.html"><a href="getting-started.html#checking-dlmtool-version"><i class="fa fa-check"></i><b>2.2.4</b> Checking DLMtool version</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="getting-started.html"><a href="getting-started.html#loading-dlmtool"><i class="fa fa-check"></i><b>2.3</b> Loading DLMtool</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="a-very-quick-demo.html"><a href="a-very-quick-demo.html"><i class="fa fa-check"></i><b>3</b> A Very Quick Demo</a></li>
<li class="chapter" data-level="4" data-path="the-operating-model.html"><a href="the-operating-model.html"><i class="fa fa-check"></i><b>4</b> The Operating Model</a><ul>
<li class="chapter" data-level="4.1" data-path="the-operating-model.html"><a href="the-operating-model.html#om-components"><i class="fa fa-check"></i><b>4.1</b> OM Components</a><ul>
<li class="chapter" data-level="4.1.1" data-path="the-operating-model.html"><a href="the-operating-model.html#stock-object"><i class="fa fa-check"></i><b>4.1.1</b> Stock Object</a></li>
<li class="chapter" data-level="4.1.2" data-path="the-operating-model.html"><a href="the-operating-model.html#fleet-object"><i class="fa fa-check"></i><b>4.1.2</b> Fleet Object</a></li>
<li class="chapter" data-level="4.1.3" data-path="the-operating-model.html"><a href="the-operating-model.html#obs-object"><i class="fa fa-check"></i><b>4.1.3</b> Obs Object</a></li>
<li class="chapter" data-level="4.1.4" data-path="the-operating-model.html"><a href="the-operating-model.html#imp-object"><i class="fa fa-check"></i><b>4.1.4</b> Imp Object</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="the-operating-model.html"><a href="the-operating-model.html#plotting-om-components"><i class="fa fa-check"></i><b>4.2</b> Plotting OM Components</a></li>
<li class="chapter" data-level="4.3" data-path="the-operating-model.html"><a href="the-operating-model.html#building-an-om-from-component-objects"><i class="fa fa-check"></i><b>4.3</b> Building an OM from Component Objects</a></li>
<li class="chapter" data-level="4.4" data-path="the-operating-model.html"><a href="the-operating-model.html#visualizing-an-om"><i class="fa fa-check"></i><b>4.4</b> Visualizing an OM</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="management-procedures.html"><a href="management-procedures.html"><i class="fa fa-check"></i><b>5</b> Management Procedures</a><ul>
<li class="chapter" data-level="5.1" data-path="management-procedures.html"><a href="management-procedures.html#what-is-a-management-procedure"><i class="fa fa-check"></i><b>5.1</b> What is a Management Procedure?</a></li>
<li class="chapter" data-level="5.2" data-path="management-procedures.html"><a href="management-procedures.html#available-management-procedures"><i class="fa fa-check"></i><b>5.2</b> Available Management Procedures</a></li>
<li class="chapter" data-level="5.3" data-path="management-procedures.html"><a href="management-procedures.html#types-of-management-procedure"><i class="fa fa-check"></i><b>5.3</b> Types of Management Procedure</a><ul>
<li class="chapter" data-level="5.3.1" data-path="management-procedures.html"><a href="management-procedures.html#input-control-mps"><i class="fa fa-check"></i><b>5.3.1</b> Input Control MPs</a></li>
<li class="chapter" data-level="5.3.2" data-path="management-procedures.html"><a href="management-procedures.html#output-control-mps"><i class="fa fa-check"></i><b>5.3.2</b> Output Control MPs</a></li>
<li class="chapter" data-level="5.3.3" data-path="management-procedures.html"><a href="management-procedures.html#mixed-mps"><i class="fa fa-check"></i><b>5.3.3</b> Mixed MPs</a></li>
<li class="chapter" data-level="5.3.4" data-path="management-procedures.html"><a href="management-procedures.html#reference-mps"><i class="fa fa-check"></i><b>5.3.4</b> Reference MPs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="running-the-mse.html"><a href="running-the-mse.html"><i class="fa fa-check"></i><b>6</b> Running the MSE</a><ul>
<li class="chapter" data-level="6.1" data-path="running-the-mse.html"><a href="running-the-mse.html#specify-an-operating-model"><i class="fa fa-check"></i><b>6.1</b> Specify an Operating Model</a></li>
<li class="chapter" data-level="6.2" data-path="running-the-mse.html"><a href="running-the-mse.html#choose-the-management-procedures"><i class="fa fa-check"></i><b>6.2</b> Choose the Management Procedures</a></li>
<li class="chapter" data-level="6.3" data-path="running-the-mse.html"><a href="running-the-mse.html#run-the-mse"><i class="fa fa-check"></i><b>6.3</b> Run the MSE</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="checking-convergence.html"><a href="checking-convergence.html"><i class="fa fa-check"></i><b>7</b> Checking Convergence</a></li>
<li class="chapter" data-level="8" data-path="examining-the-mse-results.html"><a href="examining-the-mse-results.html"><i class="fa fa-check"></i><b>8</b> Examining the MSE Results</a><ul>
<li class="chapter" data-level="8.1" data-path="examining-the-mse-results.html"><a href="examining-the-mse-results.html#introducing-performance-metrics"><i class="fa fa-check"></i><b>8.1</b> Introducing Performance Metrics</a></li>
<li class="chapter" data-level="8.2" data-path="examining-the-mse-results.html"><a href="examining-the-mse-results.html#summary-table"><i class="fa fa-check"></i><b>8.2</b> Summary Table</a></li>
<li class="chapter" data-level="8.3" data-path="examining-the-mse-results.html"><a href="examining-the-mse-results.html#plotting-mse-results"><i class="fa fa-check"></i><b>8.3</b> Plotting MSE Results</a><ul>
<li class="chapter" data-level="8.3.1" data-path="examining-the-mse-results.html"><a href="examining-the-mse-results.html#trade-off-plots"><i class="fa fa-check"></i><b>8.3.1</b> Trade-Off Plots</a></li>
<li class="chapter" data-level="8.3.2" data-path="examining-the-mse-results.html"><a href="examining-the-mse-results.html#wormplot"><i class="fa fa-check"></i><b>8.3.2</b> Wormplot</a></li>
<li class="chapter" data-level="8.3.3" data-path="examining-the-mse-results.html"><a href="examining-the-mse-results.html#projection-plots"><i class="fa fa-check"></i><b>8.3.3</b> Projection Plots</a></li>
<li class="chapter" data-level="8.3.4" data-path="examining-the-mse-results.html"><a href="examining-the-mse-results.html#kobe-plots"><i class="fa fa-check"></i><b>8.3.4</b> Kobe Plots</a></li>
<li class="chapter" data-level="8.3.5" data-path="examining-the-mse-results.html"><a href="examining-the-mse-results.html#compare-to-current-conditions"><i class="fa fa-check"></i><b>8.3.5</b> Compare to Current Conditions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="parallel-processing.html"><a href="parallel-processing.html"><i class="fa fa-check"></i><b>9</b> Parallel Processing</a><ul>
<li class="chapter" data-level="9.1" data-path="parallel-processing.html"><a href="parallel-processing.html#setting-up-parallel-processing"><i class="fa fa-check"></i><b>9.1</b> Setting up Parallel Processing</a></li>
<li class="chapter" data-level="9.2" data-path="parallel-processing.html"><a href="parallel-processing.html#running-mse-with-parallel-processing"><i class="fa fa-check"></i><b>9.2</b> Running MSE with Parallel Processing</a></li>
<li class="chapter" data-level="9.3" data-path="parallel-processing.html"><a href="parallel-processing.html#determining-optimal-number-of-processors"><i class="fa fa-check"></i><b>9.3</b> Determining Optimal Number of Processors</a></li>
</ul></li>
<li class="part"><span><b>Creating an Operating Model</b></span></li>
<li class="chapter" data-level="10" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html"><i class="fa fa-check"></i><b>10</b> Creating a New Operating Model</a><ul>
<li class="chapter" data-level="10.1" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html#an-example-workflow"><i class="fa fa-check"></i><b>10.1</b> An Example WorkFlow</a></li>
<li class="chapter" data-level="10.2" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html#create-a-new-project"><i class="fa fa-check"></i><b>10.2</b> Create a New Project</a></li>
<li class="chapter" data-level="10.3" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html#initialize-a-new-om"><i class="fa fa-check"></i><b>10.3</b> Initialize a New OM</a><ul>
<li class="chapter" data-level="10.3.1" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html#using-templates"><i class="fa fa-check"></i><b>10.3.1</b> Using Templates</a></li>
<li class="chapter" data-level="10.3.2" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html#an-example"><i class="fa fa-check"></i><b>10.3.2</b> An Example</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html#populate-and-document-om"><i class="fa fa-check"></i><b>10.4</b> Populate and Document OM</a></li>
<li class="chapter" data-level="10.5" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html#compile-the-om-report"><i class="fa fa-check"></i><b>10.5</b> Compile the OM Report</a></li>
<li class="chapter" data-level="10.6" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html#import-the-om-into-r"><i class="fa fa-check"></i><b>10.6</b> Import the OM into R</a></li>
<li class="chapter" data-level="10.7" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html#documenting-an-existing-om"><i class="fa fa-check"></i><b>10.7</b> Documenting an Existing OM</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="generating-correlated-life-history-parameters.html"><a href="generating-correlated-life-history-parameters.html"><i class="fa fa-check"></i><b>11</b> Generating Correlated Life-History Parameters</a><ul>
<li class="chapter" data-level="11.1" data-path="generating-correlated-life-history-parameters.html"><a href="generating-correlated-life-history-parameters.html#predicting-all-life-history-parameters"><i class="fa fa-check"></i><b>11.1</b> Predicting all life-history parameters</a></li>
<li class="chapter" data-level="11.2" data-path="generating-correlated-life-history-parameters.html"><a href="generating-correlated-life-history-parameters.html#predicting-some-life-history-parameters"><i class="fa fa-check"></i><b>11.2</b> Predicting some life-history parameters</a></li>
<li class="chapter" data-level="11.3" data-path="generating-correlated-life-history-parameters.html"><a href="generating-correlated-life-history-parameters.html#predicting-correlated-parameters"><i class="fa fa-check"></i><b>11.3</b> Predicting correlated parameters</a></li>
<li class="chapter" data-level="11.4" data-path="generating-correlated-life-history-parameters.html"><a href="generating-correlated-life-history-parameters.html#introducing-custom-parameters"><i class="fa fa-check"></i><b>11.4</b> Introducing Custom Parameters</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="modifying-the-om.html"><a href="modifying-the-om.html"><i class="fa fa-check"></i><b>12</b> Modifying the OM</a><ul>
<li class="chapter" data-level="12.1" data-path="modifying-the-om.html"><a href="modifying-the-om.html#the-tinyerr-function"><i class="fa fa-check"></i><b>12.1</b> The <code>tinyErr</code> function</a></li>
<li class="chapter" data-level="12.2" data-path="modifying-the-om.html"><a href="modifying-the-om.html#the-replace-function"><i class="fa fa-check"></i><b>12.2</b> The <code>Replace</code> function</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="operating-model-library.html"><a href="operating-model-library.html"><i class="fa fa-check"></i><b>13</b> Operating Model Library</a></li>
<li class="part"><span><b>Interpreting MSE Results</b></span></li>
<li class="chapter" data-level="14" data-path="examining-the-mse-object.html"><a href="examining-the-mse-object.html"><i class="fa fa-check"></i><b>14</b> Examining the MSE object</a><ul>
<li class="chapter" data-level="14.1" data-path="examining-the-mse-object.html"><a href="examining-the-mse-object.html#the-first-six-slots"><i class="fa fa-check"></i><b>14.1</b> The First Six Slots</a></li>
<li class="chapter" data-level="14.2" data-path="examining-the-mse-object.html"><a href="examining-the-mse-object.html#the-om-slot"><i class="fa fa-check"></i><b>14.2</b> The <code>OM</code> Slot</a></li>
<li class="chapter" data-level="14.3" data-path="examining-the-mse-object.html"><a href="examining-the-mse-object.html#the-obs-slot"><i class="fa fa-check"></i><b>14.3</b> The <code>Obs</code> Slot</a></li>
<li class="chapter" data-level="14.4" data-path="examining-the-mse-object.html"><a href="examining-the-mse-object.html#the-b_bmsy-and-f_fmsy-slots"><i class="fa fa-check"></i><b>14.4</b> The <code>B_BMSY</code> and <code>F_FMSY</code> Slots</a></li>
<li class="chapter" data-level="14.5" data-path="examining-the-mse-object.html"><a href="examining-the-mse-object.html#the-b-fm-c-and-tac-slots"><i class="fa fa-check"></i><b>14.5</b> The <code>B</code>, <code>FM</code>, <code>C</code> and <code>TAC</code> Slots</a></li>
<li class="chapter" data-level="14.6" data-path="examining-the-mse-object.html"><a href="examining-the-mse-object.html#the-ssb_hist-cb_hist-and-fm_hist-slots"><i class="fa fa-check"></i><b>14.6</b> The <code>SSB_hist</code>, <code>CB_hist</code>, and <code>FM_hist</code> Slots</a></li>
<li class="chapter" data-level="14.7" data-path="examining-the-mse-object.html"><a href="examining-the-mse-object.html#the-effort-slot"><i class="fa fa-check"></i><b>14.7</b> The <code>Effort</code> Slot</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="performance-metrics.html"><a href="performance-metrics.html"><i class="fa fa-check"></i><b>15</b> Performance Metrics</a><ul>
<li class="chapter" data-level="15.1" data-path="performance-metrics.html"><a href="performance-metrics.html#the-need-for-performance-metrics"><i class="fa fa-check"></i><b>15.1</b> The Need for Performance Metrics</a></li>
<li class="chapter" data-level="15.2" data-path="performance-metrics.html"><a href="performance-metrics.html#inevitable-trade-offs"><i class="fa fa-check"></i><b>15.2</b> Inevitable Trade-Offs</a><ul>
<li class="chapter" data-level="15.2.1" data-path="performance-metrics.html"><a href="performance-metrics.html#operational-management-objectives"><i class="fa fa-check"></i><b>15.2.1</b> Operational Management Objectives</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="performance-metrics.html"><a href="performance-metrics.html#commonly-used-performance-metrics"><i class="fa fa-check"></i><b>15.3</b> Commonly used Performance Metrics</a><ul>
<li class="chapter" data-level="15.3.1" data-path="performance-metrics.html"><a href="performance-metrics.html#fishing-mortality"><i class="fa fa-check"></i><b>15.3.1</b> Fishing Mortality</a></li>
<li class="chapter" data-level="15.3.2" data-path="performance-metrics.html"><a href="performance-metrics.html#stock-biomass"><i class="fa fa-check"></i><b>15.3.2</b> Stock Biomass</a></li>
<li class="chapter" data-level="15.3.3" data-path="performance-metrics.html"><a href="performance-metrics.html#additional-performance-metrics"><i class="fa fa-check"></i><b>15.3.3</b> Additional Performance Metrics</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="performance-metrics.html"><a href="performance-metrics.html#performance-metrics-methods"><i class="fa fa-check"></i><b>15.4</b> Performance Metrics Methods</a><ul>
<li class="chapter" data-level="15.4.1" data-path="performance-metrics.html"><a href="performance-metrics.html#overview-of-the-pm-functions"><i class="fa fa-check"></i><b>15.4.1</b> Overview of the <code>PM</code> Functions</a></li>
<li class="chapter" data-level="15.4.2" data-path="performance-metrics.html"><a href="performance-metrics.html#customizing-the-pm-functions"><i class="fa fa-check"></i><b>15.4.2</b> Customizing the <code>PM</code> Functions</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="performance-metrics.html"><a href="performance-metrics.html#summarizing-management-procedure-performance"><i class="fa fa-check"></i><b>15.5</b> Summarizing Management Procedure Performance</a><ul>
<li class="chapter" data-level="15.5.1" data-path="performance-metrics.html"><a href="performance-metrics.html#summary-table-1"><i class="fa fa-check"></i><b>15.5.1</b> <code>summary</code> Table</a></li>
<li class="chapter" data-level="15.5.2" data-path="performance-metrics.html"><a href="performance-metrics.html#trade-off-plots-1"><i class="fa fa-check"></i><b>15.5.2</b> Trade-Off Plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="value-of-information.html"><a href="value-of-information.html"><i class="fa fa-check"></i><b>16</b> Value of Information</a></li>
<li class="part"><span><b>Using Fishery Data</b></span></li>
<li class="chapter" data-level="17" data-path="the-fishery-data-object.html"><a href="the-fishery-data-object.html"><i class="fa fa-check"></i><b>17</b> The Fishery Data Object</a><ul>
<li class="chapter" data-level="17.1" data-path="the-fishery-data-object.html"><a href="the-fishery-data-object.html#in-the-mse"><i class="fa fa-check"></i><b>17.1</b> In the MSE</a></li>
<li class="chapter" data-level="17.2" data-path="the-fishery-data-object.html"><a href="the-fishery-data-object.html#application-of-management-procedures-using-real-fisheries-data"><i class="fa fa-check"></i><b>17.2</b> Application of Management Procedures Using Real Fisheries Data</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="example-data-objects.html"><a href="example-data-objects.html"><i class="fa fa-check"></i><b>18</b> Example Data Objects</a></li>
<li class="chapter" data-level="19" data-path="creating-your-own-data-object.html"><a href="creating-your-own-data-object.html"><i class="fa fa-check"></i><b>19</b> Creating Your Own Data Object</a><ul>
<li class="chapter" data-level="19.1" data-path="creating-your-own-data-object.html"><a href="creating-your-own-data-object.html#creating-a-data-file-in-excel"><i class="fa fa-check"></i><b>19.1</b> Creating a Data File in Excel</a></li>
<li class="chapter" data-level="19.2" data-path="creating-your-own-data-object.html"><a href="creating-your-own-data-object.html#importing-the-data-object"><i class="fa fa-check"></i><b>19.2</b> Importing the Data object</a></li>
<li class="chapter" data-level="19.3" data-path="creating-your-own-data-object.html"><a href="creating-your-own-data-object.html#example-fishery-data-files"><i class="fa fa-check"></i><b>19.3</b> Example Fishery Data Files</a></li>
<li class="chapter" data-level="19.4" data-path="creating-your-own-data-object.html"><a href="creating-your-own-data-object.html#populating-a-data-object-in-r"><i class="fa fa-check"></i><b>19.4</b> Populating a Data Object in R</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="plotting-data-objects.html"><a href="plotting-data-objects.html"><i class="fa fa-check"></i><b>20</b> Plotting Data Objects</a></li>
<li class="chapter" data-level="21" data-path="determining-feasible-and-available-management-procedures.html"><a href="determining-feasible-and-available-management-procedures.html"><i class="fa fa-check"></i><b>21</b> Determining Feasible and Available Management Procedures</a><ul>
<li class="chapter" data-level="21.1" data-path="determining-feasible-and-available-management-procedures.html"><a href="determining-feasible-and-available-management-procedures.html#feasible-mps"><i class="fa fa-check"></i><b>21.1</b> Feasible MPs</a></li>
<li class="chapter" data-level="21.2" data-path="determining-feasible-and-available-management-procedures.html"><a href="determining-feasible-and-available-management-procedures.html#available-mps"><i class="fa fa-check"></i><b>21.2</b> Available MPs</a></li>
<li class="chapter" data-level="21.3" data-path="determining-feasible-and-available-management-procedures.html"><a href="determining-feasible-and-available-management-procedures.html#unavailable-mps"><i class="fa fa-check"></i><b>21.3</b> Unavailable MPs</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="applying-management-procedures.html"><a href="applying-management-procedures.html"><i class="fa fa-check"></i><b>22</b> Applying Management Procedures</a></li>
<li class="part"><span><b>Advanced DLMtool</b></span></li>
<li class="chapter" data-level="23" data-path="averaging-mps.html"><a href="averaging-mps.html"><i class="fa fa-check"></i><b>23</b> Averaging MPs</a></li>
<li class="chapter" data-level="24" data-path="evaluating-om.html"><a href="evaluating-om.html"><i class="fa fa-check"></i><b>24</b> Evaluating OM</a></li>
<li class="chapter" data-level="25" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html"><i class="fa fa-check"></i><b>25</b> Customizing the Operating Model</a><ul>
<li class="chapter" data-level="25.1" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#accounting-for-historical-changes-in-fishing"><i class="fa fa-check"></i><b>25.1</b> Accounting for Historical Changes in Fishing</a><ul>
<li class="chapter" data-level="25.1.1" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#historical-trends-in-fishing-mortality"><i class="fa fa-check"></i><b>25.1.1</b> Historical Trends in Fishing Mortality</a></li>
<li class="chapter" data-level="25.1.2" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#historical-trends-in-selectivity-pattern"><i class="fa fa-check"></i><b>25.1.2</b> Historical Trends in Selectivity Pattern</a></li>
<li class="chapter" data-level="25.1.3" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#including-existing-mpas"><i class="fa fa-check"></i><b>25.1.3</b> Including Existing MPAs</a></li>
</ul></li>
<li class="chapter" data-level="25.2" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#size-specific-natural-mortality"><i class="fa fa-check"></i><b>25.2</b> Size-Specific Natural Mortality</a><ul>
<li class="chapter" data-level="25.2.1" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#constant-m-at-agesize"><i class="fa fa-check"></i><b>25.2.1</b> Constant M at age/size</a></li>
<li class="chapter" data-level="25.2.2" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#lorenzen-function-of-weight"><i class="fa fa-check"></i><b>25.2.2</b> Lorenzen function of weight</a></li>
<li class="chapter" data-level="25.2.3" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#map-age-specific-m"><i class="fa fa-check"></i><b>25.2.3</b> Map Age-Specific M</a></li>
<li class="chapter" data-level="25.2.4" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#map-length-specific-m"><i class="fa fa-check"></i><b>25.2.4</b> Map Length-Specific M</a></li>
</ul></li>
<li class="chapter" data-level="25.3" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#selection-retention-and-discard-mortality"><i class="fa fa-check"></i><b>25.3</b> Selection, Retention and Discard Mortality</a><ul>
<li class="chapter" data-level="25.3.1" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#fishery-selection-curve"><i class="fa fa-check"></i><b>25.3.1</b> Fishery Selection Curve</a></li>
<li class="chapter" data-level="25.3.2" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#fishery-retention-curve"><i class="fa fa-check"></i><b>25.3.2</b> Fishery Retention Curve</a></li>
<li class="chapter" data-level="25.3.3" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#discard-mortality"><i class="fa fa-check"></i><b>25.3.3</b> Discard Mortality</a></li>
<li class="chapter" data-level="25.3.4" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#general-discarding"><i class="fa fa-check"></i><b>25.3.4</b> General Discarding</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="26" data-path="developing-custom-management-procedures.html"><a href="developing-custom-management-procedures.html"><i class="fa fa-check"></i><b>26</b> Developing Custom Management Procedures</a><ul>
<li class="chapter" data-level="26.1" data-path="developing-custom-management-procedures.html"><a href="developing-custom-management-procedures.html#the-anatomy-of-an-mp"><i class="fa fa-check"></i><b>26.1</b> The Anatomy of an MP</a></li>
<li class="chapter" data-level="26.2" data-path="developing-custom-management-procedures.html"><a href="developing-custom-management-procedures.html#a-constant-catch-mp"><i class="fa fa-check"></i><b>26.2</b> A Constant Catch MP</a></li>
<li class="chapter" data-level="26.3" data-path="developing-custom-management-procedures.html"><a href="developing-custom-management-procedures.html#a-more-complex-mp"><i class="fa fa-check"></i><b>26.3</b> A More Complex MP</a></li>
<li class="chapter" data-level="26.4" data-path="developing-custom-management-procedures.html"><a href="developing-custom-management-procedures.html#beyond-the-catch-limit"><i class="fa fa-check"></i><b>26.4</b> Beyond the Catch Limit</a><ul>
<li class="chapter" data-level="26.4.1" data-path="developing-custom-management-procedures.html"><a href="developing-custom-management-procedures.html#an-example-effort-control"><i class="fa fa-check"></i><b>26.4.1</b> An Example Effort Control</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="27" data-path="custom-parameters.html"><a href="custom-parameters.html"><i class="fa fa-check"></i><b>27</b> Custom Parameters</a><ul>
<li class="chapter" data-level="27.1" data-path="custom-parameters.html"><a href="custom-parameters.html#valid-cpars-names"><i class="fa fa-check"></i><b>27.1</b> Valid cpars names</a></li>
<li class="chapter" data-level="27.2" data-path="custom-parameters.html"><a href="custom-parameters.html#correlated-samples"><i class="fa fa-check"></i><b>27.2</b> Correlated samples</a></li>
<li class="chapter" data-level="27.3" data-path="custom-parameters.html"><a href="custom-parameters.html#custom-internal-parameters"><i class="fa fa-check"></i><b>27.3</b> Custom internal parameters</a></li>
</ul></li>
<li class="chapter" data-level="28" data-path="subsetting-the-mse-object.html"><a href="subsetting-the-mse-object.html"><i class="fa fa-check"></i><b>28</b> Subsetting the MSE Object</a><ul>
<li class="chapter" data-level="28.1" data-path="subsetting-the-mse-object.html"><a href="subsetting-the-mse-object.html#subsetting-by-performance"><i class="fa fa-check"></i><b>28.1</b> Subsetting by Performance</a></li>
<li class="chapter" data-level="28.2" data-path="subsetting-the-mse-object.html"><a href="subsetting-the-mse-object.html#subsetting-by-operating-model-parameters"><i class="fa fa-check"></i><b>28.2</b> Subsetting by Operating Model Parameters</a></li>
</ul></li>
<li class="chapter" data-level="29" data-path="custom-performance-metrics.html"><a href="custom-performance-metrics.html"><i class="fa fa-check"></i><b>29</b> Custom Performance Metrics</a><ul>
<li class="chapter" data-level="29.1" data-path="custom-performance-metrics.html"><a href="custom-performance-metrics.html#necessity-of-complexity"><i class="fa fa-check"></i><b>29.1</b> Necessity of Complexity</a></li>
<li class="chapter" data-level="29.2" data-path="custom-performance-metrics.html"><a href="custom-performance-metrics.html#pm-methods-in-detail"><i class="fa fa-check"></i><b>29.2</b> <code>PM</code> Methods in Detail</a></li>
<li class="chapter" data-level="29.3" data-path="custom-performance-metrics.html"><a href="custom-performance-metrics.html#creating-example-pms-and-plot"><i class="fa fa-check"></i><b>29.3</b> Creating Example <code>PMs</code> and Plot</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i><b>A</b> Acknowledgements</a></li>
<li class="chapter" data-level="B" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>B</b> References</a></li>
<li class="chapter" data-level="C" data-path="getting-help.html"><a href="getting-help.html"><i class="fa fa-check"></i><b>C</b> Getting Help</a><ul>
<li class="chapter" data-level="C.1" data-path="getting-help.html"><a href="getting-help.html#first-time-working-with-r"><i class="fa fa-check"></i><b>C.1</b> First Time Working With R?</a><ul>
<li class="chapter" data-level="" data-path="getting-help.html"><a href="getting-help.html#the-r-software-1"><i class="fa fa-check"></i>The R Software</a></li>
<li class="chapter" data-level="" data-path="getting-help.html"><a href="getting-help.html#rstudio-1"><i class="fa fa-check"></i>RStudio</a></li>
</ul></li>
<li class="chapter" data-level="C.2" data-path="getting-help.html"><a href="getting-help.html#loadDLM"><i class="fa fa-check"></i><b>C.2</b> Installing the DLMtool Package</a><ul>
<li class="chapter" data-level="" data-path="getting-help.html"><a href="getting-help.html#installing-dlmtool-using-r-console-1"><i class="fa fa-check"></i>Installing DLMtool Using R Console</a></li>
<li class="chapter" data-level="" data-path="getting-help.html"><a href="getting-help.html#installing-dlmtool-using-rstudio"><i class="fa fa-check"></i>Installing DLMtool Using RStudio</a></li>
<li class="chapter" data-level="" data-path="getting-help.html"><a href="getting-help.html#updating-the-dlmtool-package-1"><i class="fa fa-check"></i>Updating the DLMtool Package</a></li>
<li class="chapter" data-level="" data-path="getting-help.html"><a href="getting-help.html#loading-the-dlmtool-package"><i class="fa fa-check"></i>Loading the DLMtool Package</a></li>
</ul></li>
<li class="chapter" data-level="C.3" data-path="getting-help.html"><a href="getting-help.html#a-brief-note-on-s4-methods"><i class="fa fa-check"></i><b>C.3</b> A Brief Note on S4 Methods</a></li>
<li class="chapter" data-level="C.4" data-path="getting-help.html"><a href="getting-help.html#additional-help-on-the-dlmtool"><i class="fa fa-check"></i><b>C.4</b> Additional Help on the DLMtool</a></li>
<li class="chapter" data-level="C.5" data-path="getting-help.html"><a href="getting-help.html#questions-on-r-related-problems"><i class="fa fa-check"></i><b>C.5</b> Questions on R-related Problems</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html"><i class="fa fa-check"></i><b>D</b> Assumptions of DLMtool</a><ul>
<li class="chapter" data-level="D.1" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#biology"><i class="fa fa-check"></i><b>D.1</b> Biology</a><ul>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#short-lived-species"><i class="fa fa-check"></i>Short-Lived Species</a></li>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#density-dependent-compensation"><i class="fa fa-check"></i>Density-Dependent Compensation</a></li>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#von-bertalanffy-growth"><i class="fa fa-check"></i>von Bertalanffy Growth</a></li>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#natural-mortality-rate-at-age"><i class="fa fa-check"></i>Natural Mortality Rate at Age</a></li>
</ul></li>
<li class="chapter" data-level="D.2" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#mse-model-assumptions"><i class="fa fa-check"></i><b>D.2</b> MSE Model Assumptions</a><ul>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#retention-and-selectivity"><i class="fa fa-check"></i>Retention and Selectivity</a></li>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#non-convergence-of-management-procedure"><i class="fa fa-check"></i>Non-Convergence of Management Procedure</a></li>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#idealised-observation-models-for-catch-composition-data"><i class="fa fa-check"></i>Idealised Observation Models for Catch Composition Data</a></li>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#two-box-model"><i class="fa fa-check"></i>Two-Box Model</a></li>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#ontogenetic-habitat-shifts"><i class="fa fa-check"></i>Ontogenetic Habitat Shifts</a></li>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#closed-system"><i class="fa fa-check"></i>Closed System</a></li>
</ul></li>
<li class="chapter" data-level="D.3" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#management-procedures-1"><i class="fa fa-check"></i><b>D.3</b> Management Procedures</a><ul>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#harvest-control-rules-must-be-integrated-into-data-limited-mps"><i class="fa fa-check"></i>Harvest Control Rules Must be Integrated into Data-Limited MPs</a></li>
</ul></li>
<li class="chapter" data-level="D.4" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#data-and-method-application"><i class="fa fa-check"></i><b>D.4</b> Data and Method Application</a><ul>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#data-assumed-to-be-representative"><i class="fa fa-check"></i>Data Assumed to be Representative</a></li>
</ul></li>
<li class="chapter" data-level="D.5" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#calculating-reference-points"><i class="fa fa-check"></i><b>D.5</b> Calculating Reference Points</a><ul>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#depletion-and-unfished-reference-points"><i class="fa fa-check"></i>Depletion and Unfished Reference Points</a></li>
<li class="chapter" data-level="D.5.1" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#initial-depletion"><i class="fa fa-check"></i><b>D.5.1</b> Initial Depletion</a></li>
<li class="chapter" data-level="D.5.2" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#msy-reference-points"><i class="fa fa-check"></i><b>D.5.2</b> MSY Reference Points</a></li>
<li class="chapter" data-level="D.5.3" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#setting-depletion-at-a-fraction-of-bmsy"><i class="fa fa-check"></i><b>D.5.3</b> Setting Depletion at a fraction of BMSY</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="E" data-path="changes.html"><a href="changes.html"><i class="fa fa-check"></i><b>E</b> Changes</a><ul>
<li class="chapter" data-level="" data-path="changes.html"><a href="changes.html#important-changes---dlmtool-v4.1-and-greater"><i class="fa fa-check"></i>Important changes - DLMtool V4.1 and greater</a></li>
<li class="chapter" data-level="" data-path="changes.html"><a href="changes.html#important-changes---dlmtool-v4.5-and-greater"><i class="fa fa-check"></i>Important changes - DLMtool V4.5 and greater</a></li>
<li class="chapter" data-level="E.1" data-path="changes.html"><a href="changes.html#bio-economic-model"><i class="fa fa-check"></i><b>E.1</b> Bio-Economic Model</a></li>
<li class="chapter" data-level="E.2" data-path="changes.html"><a href="changes.html#key-bio-economic-parameters"><i class="fa fa-check"></i><b>E.2</b> Key Bio-Economic Parameters</a><ul>
<li class="chapter" data-level="E.2.1" data-path="changes.html"><a href="changes.html#current-cost-and-revenue"><i class="fa fa-check"></i><b>E.2.1</b> Current Cost and Revenue</a></li>
<li class="chapter" data-level="E.2.2" data-path="changes.html"><a href="changes.html#fishing-effort-responsiveness"><i class="fa fa-check"></i><b>E.2.2</b> Fishing Effort Responsiveness</a></li>
</ul></li>
<li class="chapter" data-level="E.3" data-path="changes.html"><a href="changes.html#changes-in-cost-and-revenue"><i class="fa fa-check"></i><b>E.3</b> Changes in Cost and Revenue</a></li>
<li class="chapter" data-level="E.4" data-path="changes.html"><a href="changes.html#bio-economic-model-mps"><i class="fa fa-check"></i><b>E.4</b> Bio-Economic Model &amp; MPs</a><ul>
<li class="chapter" data-level="E.4.1" data-path="changes.html"><a href="changes.html#with-a-tac"><i class="fa fa-check"></i><b>E.4.1</b> With a TAC</a></li>
<li class="chapter" data-level="E.4.2" data-path="changes.html"><a href="changes.html#with-a-tae"><i class="fa fa-check"></i><b>E.4.2</b> With a TAE</a></li>
<li class="chapter" data-level="E.4.3" data-path="changes.html"><a href="changes.html#without-tac-or-tae"><i class="fa fa-check"></i><b>E.4.3</b> Without TAC or TAE</a></li>
</ul></li>
<li class="chapter" data-level="E.5" data-path="changes.html"><a href="changes.html#some-examples"><i class="fa fa-check"></i><b>E.5</b> Some Examples</a></li>
<li class="chapter" data-level="E.6" data-path="changes.html"><a href="changes.html#future-developments"><i class="fa fa-check"></i><b>E.6</b> Future Developments</a></li>
<li class="chapter" data-level="E.7" data-path="changes.html"><a href="changes.html#plotting-code"><i class="fa fa-check"></i><b>E.7</b> Plotting Code</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="http://www.datalimitedtoolkit.com" target="blank">DLMtool Website</a></li>
<li><a href="../index.html">DLMtool Documentation</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data-Limited Methods Toolkit (DLMtool 5.4.2)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="custom-performance-metrics" class="section level1">
<h1><span class="header-section-number">Chapter 29</span> Custom Performance Metrics</h1>
<p><code>PM</code> methods were introduced in the <a href="performance-metrics.html#performance-metrics-methods">Performance Metrics Methods</a> chapter. DLMtool includes several built-in <code>PM</code> methods:</p>
<div class="sourceCode" id="cb553"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb553-1"><a href="custom-performance-metrics.html#cb553-1"></a><span class="kw">avail</span>(<span class="st">&quot;PM&quot;</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;AAVE&quot;  &quot;AAVY&quot;  &quot;LTY&quot;   &quot;P10&quot;   &quot;P100&quot;  &quot;P50&quot;   &quot;PNOF&quot;  &quot;STY&quot;   &quot;Yield&quot; &quot;MeanB&quot; &quot;MeanF&quot;</code></pre>
<p>We saw in <a href="performance-metrics.html#customizing-the-pm-functions">Customizing the <code>PM</code> Functions</a> that it is straightforward to modify the years that the performance statistics are calculated over using the <code>Yrs</code> argument, and the reference level using the <code>Ref</code> argument. In this section we describe the <code>PM</code> functions in more detail for advanced users who wish to develop their own <code>PM</code> methods.</p>
<p>We will demonstrate this using the <code>P50</code> performance metric function as an example.</p>
<div id="necessity-of-complexity" class="section level2">
<h2><span class="header-section-number">29.1</span> Necessity of Complexity</h2>
<p>While at first glance the <code>PM</code> functions may appear overly complicated, they are actually quite straightforward. This level of complexity is required because functions of class <code>PM</code> not only return the required performance statistic, but also relevant contextual information.</p>
<p>Imagine we want to develop a function to calculate the probability that <span class="math inline">\(B &gt; 0.5 B_\text{MSY}\)</span>, which we will define as <em>not overfished</em>. We could do something like this:</p>
<div class="sourceCode" id="cb555"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb555-1"><a href="custom-performance-metrics.html#cb555-1"></a>P_Noverfished &lt;-<span class="st"> </span><span class="cf">function</span>(MSEobj) {</span>
<span id="cb555-2"><a href="custom-performance-metrics.html#cb555-2"></a>  <span class="kw">round</span>(<span class="kw">apply</span>(MSEobj<span class="op">@</span>B_BMSY <span class="op">&gt;</span><span class="fl">0.5</span>, <span class="dv">2</span>, mean),<span class="dv">2</span>)</span>
<span id="cb555-3"><a href="custom-performance-metrics.html#cb555-3"></a>}</span></code></pre></div>
<p>We could increase the flexibility of the function by adding additional arguments to specify the years to calculate the statistic over, but for this demonstration we will keep it simple.</p>
<p>Applying our function to calculate the performance statistic is straightforward:</p>
<div class="sourceCode" id="cb556"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb556-1"><a href="custom-performance-metrics.html#cb556-1"></a>MSEobj &lt;-<span class="st"> </span><span class="kw">runMSE</span>(<span class="dt">silent=</span><span class="ot">TRUE</span>) <span class="co"># run an exampe MSE</span></span>
<span id="cb556-2"><a href="custom-performance-metrics.html#cb556-2"></a>p_noverfish &lt;-<span class="st"> </span><span class="kw">P_Noverfished</span>(MSEobj) <span class="co"># calculate and store our performance statistic</span></span>
<span id="cb556-3"><a href="custom-performance-metrics.html#cb556-3"></a>p_noverfish</span></code></pre></div>
<pre><code>## [1] 0.80 0.76 0.99 0.87 0.99 0.92</code></pre>
<p>The <code>p_noverfish</code> variable now contains our performance statistic, which we could use to plot or tabulate results. However, the numeric vector returned by <code>P_Noverfished</code> includes no information on what these numbers represent. This makes it difficult to include the results in generic plotting or summary functions. Furthermore, it is easy to imagine that with several similiar performance metric functions, it will be easy to loose track of the meaning of the results unless an elaborate variable naming system is used.</p>
<p>The <code>PM</code> functions have been designed to avoid this problem by returning all information related to the calculation of the performance statistic. Here we calculate the same performance metric using the relevant <code>PM</code> function:</p>
<div class="sourceCode" id="cb558"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb558-1"><a href="custom-performance-metrics.html#cb558-1"></a>p1 &lt;-<span class="st"> </span><span class="kw">P50</span>(MSEobj)</span></code></pre></div>
<p>Note that we don’t need to use a descriptive variable name; the <code>p1</code> variable includes relevant information on the performance metric. Note also that <code>PM</code> function are most often passed directly to plotting or table functions instead of being called and stored directly.</p>
<p>The <code>p1</code> variable is an object of class PMobj and includes the following slots:</p>
<div class="sourceCode" id="cb559"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb559-1"><a href="custom-performance-metrics.html#cb559-1"></a><span class="kw">slotNames</span>(p1)</span></code></pre></div>
<pre><code>## [1] &quot;Name&quot;    &quot;Caption&quot; &quot;Stat&quot;    &quot;Ref&quot;     &quot;Prob&quot;    &quot;Mean&quot;    &quot;MPs&quot;</code></pre>
<p>The first two slots contain a descriptive name of the performance statistic, and a caption that can be used in plots or summary tables:</p>
<div class="sourceCode" id="cb561"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb561-1"><a href="custom-performance-metrics.html#cb561-1"></a>p1<span class="op">@</span>Name</span></code></pre></div>
<pre><code>## [1] &quot;Spawning Biomass relative to SBMSY&quot;</code></pre>
<div class="sourceCode" id="cb563"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb563-1"><a href="custom-performance-metrics.html#cb563-1"></a>p1<span class="op">@</span>Caption</span></code></pre></div>
<pre><code>## [1] &quot;Prob. SB &gt; 0.5 SBMSY (Years 1 - 50)&quot;</code></pre>
<p>The last two slots contain the results of performance statistic and the names of the MPs:</p>
<div class="sourceCode" id="cb565"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb565-1"><a href="custom-performance-metrics.html#cb565-1"></a>p1<span class="op">@</span>Mean</span></code></pre></div>
<pre><code>## [1] 0.7950000 0.7575000 0.9929167 0.8737500 0.9933333 0.9191667</code></pre>
<div class="sourceCode" id="cb567"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb567-1"><a href="custom-performance-metrics.html#cb567-1"></a>p1<span class="op">@</span>MPs</span></code></pre></div>
<pre><code>## [1] &quot;AvC&quot;       &quot;DCAC&quot;      &quot;FMSYref&quot;   &quot;curE&quot;      &quot;matlenlim&quot; &quot;MRreal&quot;</code></pre>
<p>We will look at the other 3 slots in detail in the next section. The main point here is to demonstrate the using functions of class <code>PM</code> that return objects of class <code>PMobj</code> has the advantage that the function output is completely self-contained and can be used elsewhere without requiring any additional information.</p>
</div>
<div id="pm-methods-in-detail" class="section level2">
<h2><span class="header-section-number">29.2</span> <code>PM</code> Methods in Detail</h2>
<p>Let’s go through the <code>P50</code> function in detail to see how it works:</p>
<div class="sourceCode" id="cb569"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb569-1"><a href="custom-performance-metrics.html#cb569-1"></a>P50</span></code></pre></div>
<pre><code>## function (MSEobj = NULL, Ref = 0.5, Yrs = NULL) 
## {
##     Yrs &lt;- ChkYrs(Yrs, MSEobj)
##     PMobj &lt;- new(&quot;PMobj&quot;)
##     PMobj@Name &lt;- &quot;Spawning Biomass relative to SBMSY&quot;
##     if (Ref != 1) {
##         PMobj@Caption &lt;- paste0(&quot;Prob. SB &gt; &quot;, Ref, &quot; SBMSY (Years &quot;, 
##             Yrs[1], &quot; - &quot;, Yrs[2], &quot;)&quot;)
##     }
##     else {
##         PMobj@Caption &lt;- paste0(&quot;Prob. SB &gt; SBMSY (Years &quot;, Yrs[1], 
##             &quot; - &quot;, Yrs[2], &quot;)&quot;)
##     }
##     PMobj@Ref &lt;- Ref
##     PMobj@Stat &lt;- MSEobj@B_BMSY[, , Yrs[1]:Yrs[2]]
##     PMobj@Prob &lt;- calcProb(PMobj@Stat &gt; PMobj@Ref, MSEobj)
##     PMobj@Mean &lt;- calcMean(PMobj@Prob)
##     PMobj@MPs &lt;- MSEobj@MPs
##     PMobj
## }
## &lt;bytecode: 0x000001d4fb008468&gt;
## &lt;environment: namespace:DLMtool&gt;
## attr(,&quot;class&quot;)
## [1] &quot;PM&quot;</code></pre>
<p>Firstly, functions of class <code>PM</code> must have three arguments: <code>MSEobj</code>, <code>Ref</code>, and <code>Yrs</code>:</p>
<div class="sourceCode" id="cb571"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb571-1"><a href="custom-performance-metrics.html#cb571-1"></a><span class="kw">args</span>(P50)</span></code></pre></div>
<pre><code>## function (MSEobj = NULL, Ref = 0.5, Yrs = NULL) 
## NULL</code></pre>
<ol style="list-style-type: decimal">
<li>The first argument <code>MSEobj</code> is obvious, an object of class <code>MSE</code> to calculate the performance statistic.</li>
<li>The second argument <code>Ref</code> must have a default value. This is used as reference for the performance statistic, and will be demonstrated shortly.</li>
<li>The third argument <code>Yrs</code> can have a default value of <code>NULL</code> or specify a numeric vector of length 2 with the first and last years to calculate the performance statistic, or a numeric vector of length 1 in which case if it is positive it is the first <code>Yrs</code> and if negative the last <code>Yrs</code> of the projection period.</li>
</ol>
<p>The first line of a <code>PM</code> function must be <code>Yrs &lt;- ChkYrs(Yrs, MSEobj)</code>. This line updates the <code>Yrs</code> variable and makes sure that the specified year indices are valid. For example:</p>
<div class="sourceCode" id="cb573"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb573-1"><a href="custom-performance-metrics.html#cb573-1"></a><span class="kw">ChkYrs</span>(<span class="ot">NULL</span>, MSEobj) <span class="co"># returns all projection years </span></span>
<span id="cb573-2"><a href="custom-performance-metrics.html#cb573-2"></a><span class="kw">ChkYrs</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">10</span>), MSEobj) <span class="co"># returns first 10 years </span></span>
<span id="cb573-3"><a href="custom-performance-metrics.html#cb573-3"></a><span class="kw">ChkYrs</span>(<span class="kw">c</span>(<span class="dv">60</span>,<span class="dv">80</span>), MSEobj) <span class="co"># returns message and last 20 years</span></span>
<span id="cb573-4"><a href="custom-performance-metrics.html#cb573-4"></a><span class="kw">ChkYrs</span>(<span class="dv">5</span>, MSEobj) <span class="co"># first 5 years</span></span>
<span id="cb573-5"><a href="custom-performance-metrics.html#cb573-5"></a><span class="kw">ChkYrs</span>(<span class="op">-</span><span class="dv">5</span>, MSEobj) <span class="co"># last 5 years</span></span>
<span id="cb573-6"><a href="custom-performance-metrics.html#cb573-6"></a><span class="kw">ChkYrs</span>(<span class="kw">c</span>(<span class="dv">50</span>,<span class="dv">10</span>), MSEobj) <span class="co"># returns an error</span></span></code></pre></div>
<p>When the default value for <code>Yrs</code> is <code>NULL</code>, the <code>Yrs</code> variable is updated to include all projection years:</p>
<div class="sourceCode" id="cb574"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb574-1"><a href="custom-performance-metrics.html#cb574-1"></a>Yrs &lt;-<span class="st"> </span><span class="kw">ChkYrs</span>(<span class="ot">NULL</span>, MSEobj)</span>
<span id="cb574-2"><a href="custom-performance-metrics.html#cb574-2"></a>Yrs</span></code></pre></div>
<pre><code>## [1]  1 50</code></pre>
<p>Next we create a new object of class <code>PMobj</code>, and populate the <code>Name</code> slot with a short but descriptive name:</p>
<div class="sourceCode" id="cb576"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb576-1"><a href="custom-performance-metrics.html#cb576-1"></a>PMobj &lt;-<span class="st"> </span><span class="kw">new</span>(<span class="st">&quot;PMobj&quot;</span>)</span>
<span id="cb576-2"><a href="custom-performance-metrics.html#cb576-2"></a>PMobj<span class="op">@</span>Name &lt;-<span class="st"> &quot;Spawning Biomass relative to SBMSY&quot;</span></span></code></pre></div>
<p>The next line populates the <code>Caption</code> slot with a brief caption including the years over which the performance statistic is calculated. The <em>if</em> statement is not crucial, but avoids the redundant <code>SB &gt; 1 SBMSY</code> in cases where <code>Ref=1</code>.</p>
<p>Next we store the value of the <code>Ref</code> argument in the <code>PMobj@Ref</code> slot so that information is contained in the function output.</p>
<div class="sourceCode" id="cb577"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb577-1"><a href="custom-performance-metrics.html#cb577-1"></a>PMobj<span class="op">@</span>Ref &lt;-<span class="st"> </span>Ref</span></code></pre></div>
<p>The <code>Stat</code> slot is an array that stores the variable which we wish to calculate the performance statistic; an output from the <code>runMSE</code> function with dimensions <code>MSE@nsim</code>, <code>MSE@nMPs</code>, and <code>MSE@proyears</code> (or fewer if the argument <code>Yrs != NULL</code>).</p>
<p>In this case we want to calculate a performance statistic related to the biomass relative to BMSY, and so we assign the <code>Stat</code> slot as follows:</p>
<div class="sourceCode" id="cb578"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb578-1"><a href="custom-performance-metrics.html#cb578-1"></a>PMobj<span class="op">@</span>Stat &lt;-<span class="st"> </span>MSEobj<span class="op">@</span>B_BMSY[, , Yrs[<span class="dv">1</span>]<span class="op">:</span>Yrs[<span class="dv">2</span>]]</span></code></pre></div>
<p>Note that we are including all simulations and MPs and indexing the years specified in <code>Yrs</code>.</p>
<p>Next we use the <code>calcProb</code> function to calculate the mean of <code>PMobj@Stat &gt; PMobj@Ref</code> over the years dimension. This results in a matrix with dimensions <code>MSE@nsim, MSE@nMPs</code>:</p>
<div class="sourceCode" id="cb579"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb579-1"><a href="custom-performance-metrics.html#cb579-1"></a>PMobj<span class="op">@</span>Prob &lt;-<span class="st"> </span><span class="kw">calcProb</span>(PMobj<span class="op">@</span>Stat <span class="op">&gt;</span><span class="st"> </span>PMobj<span class="op">@</span>Ref, MSEobj)</span></code></pre></div>
<p>Note that in order to calculate a probability the argument to the <code>calcProb</code> function must be a logical array, which is achieved using the <code>Ref</code> slot.</p>
<p>Also note that in this case <code>PMobj@Stat &gt; PMobj@Ref</code> is equivalent to <code>MSEobj@B_BMSY[, , Yrs[1]:Yrs[2]] &gt; 0.5</code>. The <code>PM</code> functions have been designed this way so that in most cases the <code>PMobj@Prob &lt;- calcProb(PMobj@Stat &gt; PMobj@Ref)</code> line is identical in all <code>PM</code> functions and does not need to be modified. The exception to this is if we don’t want to calculate a probability but want the actual mean values of <code>PMobj@Stat</code>, demonstrated in the example below.</p>
<p>In the next line we calculate the mean of <code>PMobj@Prob</code> over simulations using the <code>calcMean</code> function:</p>
<div class="sourceCode" id="cb580"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb580-1"><a href="custom-performance-metrics.html#cb580-1"></a>PMobj<span class="op">@</span>Mean &lt;-<span class="st"> </span><span class="kw">calcMean</span>(PMobj<span class="op">@</span>Prob)</span></code></pre></div>
<p>Similiar to the previous line, this line is identical in all <code>PM</code> functions and can be simply copy/pasted from other <code>PM</code> functions without being modified. The <code>Mean</code> slot is a numeric vector of length <code>MSEobj@nMPs</code> with the overall performance statistic, in this case the probability of <span class="math inline">\(B &gt; 0.5B_\text{MSY}\)</span> across all simulations and years.</p>
<p>Finally, we store the names of the MPs and return the <code>PMobj</code>.</p>
</div>
<div id="creating-example-pms-and-plot" class="section level2">
<h2><span class="header-section-number">29.3</span> Creating Example <code>PMs</code> and Plot</h2>
<p>As an example, we will create another version of <code>DFO_plot</code> using some custom <code>PM</code> functions and a customized version of <code>TradePlot</code>.</p>
<p>First we create the plot using <code>DFO_plot</code>:</p>
<div class="sourceCode" id="cb581"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb581-1"><a href="custom-performance-metrics.html#cb581-1"></a><span class="kw">DFO_plot</span>(MSEobj)</span></code></pre></div>
<p><img src="userguide_files/figure-html/unnamed-chunk-208-1.png" width="672" /></p>
<p>From the help documentation (<code>?DFO_plot</code>) we can see that this function plots mean biomass relative to BMSY and fishing mortality rate relative to FMSY
over the final 5 years of the projection.</p>
<p>First we’ll develop a <code>PM</code> function to calculate the mean B/BMSY for the last 5 years of the projection period. Notice that this is very similiar to <code>P50</code> described above, with the modification of the <code>Caption</code> and the <code>Prob</code> slots, and the <code>Yrs</code> argument. We are calculating a mean here instead of a probability and are not using the <code>Ref</code> argument:</p>
<div class="sourceCode" id="cb582"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb582-1"><a href="custom-performance-metrics.html#cb582-1"></a>MeanB &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">MSEobj =</span> <span class="ot">NULL</span>, <span class="dt">Ref =</span> <span class="dv">1</span>, <span class="dt">Yrs =</span> <span class="dv">-5</span>) {</span>
<span id="cb582-2"><a href="custom-performance-metrics.html#cb582-2"></a>    Yrs &lt;-<span class="st"> </span><span class="kw">ChkYrs</span>(Yrs, MSEobj)</span>
<span id="cb582-3"><a href="custom-performance-metrics.html#cb582-3"></a>    PMobj &lt;-<span class="st"> </span><span class="kw">new</span>(<span class="st">&quot;PMobj&quot;</span>)</span>
<span id="cb582-4"><a href="custom-performance-metrics.html#cb582-4"></a>    PMobj<span class="op">@</span>Name &lt;-<span class="st"> &quot;Spawning Biomass relative to SBMSY&quot;</span></span>
<span id="cb582-5"><a href="custom-performance-metrics.html#cb582-5"></a>    PMobj<span class="op">@</span>Caption &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&quot;Mean SB/SBMSY (Years &quot;</span>, Yrs[<span class="dv">1</span>], <span class="st">&quot; - &quot;</span>, Yrs[<span class="dv">2</span>], <span class="st">&quot;)&quot;</span>)</span>
<span id="cb582-6"><a href="custom-performance-metrics.html#cb582-6"></a>    </span>
<span id="cb582-7"><a href="custom-performance-metrics.html#cb582-7"></a>    PMobj<span class="op">@</span>Ref &lt;-<span class="st"> </span>Ref</span>
<span id="cb582-8"><a href="custom-performance-metrics.html#cb582-8"></a>    PMobj<span class="op">@</span>Stat &lt;-<span class="st"> </span>MSEobj<span class="op">@</span>B_BMSY[, , Yrs[<span class="dv">1</span>]<span class="op">:</span>Yrs[<span class="dv">2</span>]]</span>
<span id="cb582-9"><a href="custom-performance-metrics.html#cb582-9"></a>    PMobj<span class="op">@</span>Prob &lt;-<span class="st"> </span><span class="kw">calcProb</span>(PMobj<span class="op">@</span>Stat, MSEobj)</span>
<span id="cb582-10"><a href="custom-performance-metrics.html#cb582-10"></a>    PMobj<span class="op">@</span>Mean &lt;-<span class="st"> </span><span class="kw">calcMean</span>(PMobj<span class="op">@</span>Prob)</span>
<span id="cb582-11"><a href="custom-performance-metrics.html#cb582-11"></a>    PMobj<span class="op">@</span>MPs &lt;-<span class="st"> </span>MSEobj<span class="op">@</span>MPs</span>
<span id="cb582-12"><a href="custom-performance-metrics.html#cb582-12"></a>    PMobj</span>
<span id="cb582-13"><a href="custom-performance-metrics.html#cb582-13"></a>}</span></code></pre></div>
<p>We develop a <code>PM</code> function to calculate average F/FMSY in a similar way:</p>
<div class="sourceCode" id="cb583"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb583-1"><a href="custom-performance-metrics.html#cb583-1"></a>MeanF &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">MSEobj =</span> <span class="ot">NULL</span>, <span class="dt">Ref =</span> <span class="dv">1</span>, <span class="dt">Yrs =</span> <span class="dv">-5</span>) {</span>
<span id="cb583-2"><a href="custom-performance-metrics.html#cb583-2"></a>    Yrs &lt;-<span class="st"> </span><span class="kw">ChkYrs</span>(Yrs, MSEobj)</span>
<span id="cb583-3"><a href="custom-performance-metrics.html#cb583-3"></a>    PMobj &lt;-<span class="st"> </span><span class="kw">new</span>(<span class="st">&quot;PMobj&quot;</span>)</span>
<span id="cb583-4"><a href="custom-performance-metrics.html#cb583-4"></a>    PMobj<span class="op">@</span>Name &lt;-<span class="st"> &quot;Fishing Mortality relative to FMSY&quot;</span></span>
<span id="cb583-5"><a href="custom-performance-metrics.html#cb583-5"></a>    PMobj<span class="op">@</span>Caption &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&quot;Mean F/FMSY (Years &quot;</span>, Yrs[<span class="dv">1</span>], <span class="st">&quot; - &quot;</span>, Yrs[<span class="dv">2</span>], <span class="st">&quot;)&quot;</span>)</span>
<span id="cb583-6"><a href="custom-performance-metrics.html#cb583-6"></a>    </span>
<span id="cb583-7"><a href="custom-performance-metrics.html#cb583-7"></a>    PMobj<span class="op">@</span>Ref &lt;-<span class="st"> </span>Ref</span>
<span id="cb583-8"><a href="custom-performance-metrics.html#cb583-8"></a>    PMobj<span class="op">@</span>Stat &lt;-<span class="st"> </span>MSEobj<span class="op">@</span>F_FMSY[, , Yrs[<span class="dv">1</span>]<span class="op">:</span>Yrs[<span class="dv">2</span>]]</span>
<span id="cb583-9"><a href="custom-performance-metrics.html#cb583-9"></a>    PMobj<span class="op">@</span>Prob &lt;-<span class="st"> </span><span class="kw">calcProb</span>(PMobj<span class="op">@</span>Stat, MSEobj)</span>
<span id="cb583-10"><a href="custom-performance-metrics.html#cb583-10"></a>    PMobj<span class="op">@</span>Mean &lt;-<span class="st"> </span><span class="kw">calcMean</span>(PMobj<span class="op">@</span>Prob)</span>
<span id="cb583-11"><a href="custom-performance-metrics.html#cb583-11"></a>    PMobj<span class="op">@</span>MPs &lt;-<span class="st"> </span>MSEobj<span class="op">@</span>MPs</span>
<span id="cb583-12"><a href="custom-performance-metrics.html#cb583-12"></a>    PMobj</span>
<span id="cb583-13"><a href="custom-performance-metrics.html#cb583-13"></a>}</span></code></pre></div>
<p>Similar to developing custom MPs we need to tell R that these new functions are <code>PM</code> methods:</p>
<div class="sourceCode" id="cb584"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb584-1"><a href="custom-performance-metrics.html#cb584-1"></a><span class="kw">class</span>(MeanB) &lt;-<span class="st"> &quot;PM&quot;</span></span>
<span id="cb584-2"><a href="custom-performance-metrics.html#cb584-2"></a><span class="kw">class</span>(MeanF) &lt;-<span class="st"> &quot;PM&quot;</span></span></code></pre></div>
<p>Now we can test our performance metric functions:</p>
<div class="sourceCode" id="cb585"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb585-1"><a href="custom-performance-metrics.html#cb585-1"></a><span class="kw">data.frame</span>(<span class="dt">MP=</span><span class="kw">MeanB</span>(MSEobj)<span class="op">@</span>MPs, <span class="dt">B_BMSY=</span><span class="kw">MeanB</span>(MSEobj)<span class="op">@</span>Mean, <span class="dt">F_FMSY=</span><span class="kw">MeanF</span>(MSEobj)<span class="op">@</span>Mean)</span></code></pre></div>
<pre><code>##          MP    B_BMSY    F_FMSY
## 1       AvC 1.6534967 1.1436909
## 2      DCAC 0.7812216 1.9835498
## 3   FMSYref 1.0454687 0.9785792
## 4      curE 1.5807679 0.8960045
## 5 matlenlim 2.3956111 0.2200407
## 6    MRreal 1.6680184 0.8885163</code></pre>
<p>How do these results compare to what is shown in <code>DFO_plot</code>?</p>
<p>We could also use the <code>summary</code> function with our new <code>PM</code> functions, but note that these results are not probabilities:</p>
<div class="sourceCode" id="cb587"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb587-1"><a href="custom-performance-metrics.html#cb587-1"></a><span class="kw">summary</span>(MSEobj, <span class="st">&#39;MeanB&#39;</span>, <span class="st">&#39;MeanF&#39;</span>)</span></code></pre></div>
<pre><code>## Calculating Performance Metrics</code></pre>
<pre><code>##                  Performance.Metrics                               
## 1 Spawning Biomass relative to SBMSY  Mean SB/SBMSY (Years 46 - 50)
## 2 Fishing Mortality relative to FMSY    Mean F/FMSY (Years 46 - 50)
## 
## 
## Performance Statistics:
##          MP MeanB MeanF
## 1       AvC  1.70  1.10
## 2      DCAC  0.78  2.00
## 3   FMSYref  1.00  0.98
## 4      curE  1.60  0.90
## 5 matlenlim  2.40  0.22
## 6    MRreal  1.70  0.89</code></pre>
<p>Finally, we will develop a customized plotting function to reproduce the image produced by <code>DFO_plot</code>.</p>
<p>We can produced something fairly similar quite quickly using the <code>TradePlot</code> function:</p>
<div class="sourceCode" id="cb590"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb590-1"><a href="custom-performance-metrics.html#cb590-1"></a><span class="kw">TradePlot</span>(MSEobj, <span class="st">&#39;MeanB&#39;</span>, <span class="st">&#39;MeanF&#39;</span>, <span class="dt">Lims=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>))</span></code></pre></div>
<p><img src="userguide_files/figure-html/unnamed-chunk-214-1.png" width="672" /></p>
<pre><code>##          MP MeanB MeanF Satisificed
## 1       AvC  1.70  1.10        TRUE
## 2      DCAC  0.78  2.00        TRUE
## 3   FMSYref  1.00  0.98        TRUE
## 4      curE  1.60  0.90        TRUE
## 5 matlenlim  2.40  0.22        TRUE
## 6    MRreal  1.70  0.89        TRUE</code></pre>
<p>Adding the shaded polygons and text requires a little more tweaking and some knowledge of the <code>ggplot2</code> package. We will wrap up our code in a function:</p>
<div class="sourceCode" id="cb592"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb592-1"><a href="custom-performance-metrics.html#cb592-1"></a>NewPlot &lt;-<span class="st"> </span><span class="cf">function</span>(MSEobj) {</span>
<span id="cb592-2"><a href="custom-performance-metrics.html#cb592-2"></a>  <span class="co"># create but don&#39;t show the plot</span></span>
<span id="cb592-3"><a href="custom-performance-metrics.html#cb592-3"></a>  P &lt;-<span class="st"> </span><span class="kw">TradePlot</span>(MSEobj, <span class="st">&#39;MeanB&#39;</span>, <span class="st">&#39;MeanF&#39;</span>, <span class="dt">Lims=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="dt">Show=</span><span class="ot">FALSE</span>) </span>
<span id="cb592-4"><a href="custom-performance-metrics.html#cb592-4"></a>  P1 &lt;-<span class="st"> </span>P<span class="op">$</span>Plots[[<span class="dv">1</span>]] <span class="co"># the ggplot objects are returned as a list</span></span>
<span id="cb592-5"><a href="custom-performance-metrics.html#cb592-5"></a>  </span>
<span id="cb592-6"><a href="custom-performance-metrics.html#cb592-6"></a>  <span class="co"># add the shaded regions and the text</span></span>
<span id="cb592-7"><a href="custom-performance-metrics.html#cb592-7"></a>  P1 <span class="op">+</span><span class="st"> </span>ggplot2<span class="op">::</span><span class="kw">geom_rect</span>(ggplot2<span class="op">::</span><span class="kw">aes</span>(<span class="dt">xmin=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>), <span class="dt">xmax=</span><span class="kw">c</span>(<span class="fl">0.4</span>, <span class="fl">0.8</span>, <span class="ot">Inf</span>), </span>
<span id="cb592-8"><a href="custom-performance-metrics.html#cb592-8"></a>                                       <span class="dt">ymin=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>), <span class="dt">ymax=</span><span class="kw">rep</span>(<span class="ot">Inf</span>,<span class="dv">3</span>)),</span>
<span id="cb592-9"><a href="custom-performance-metrics.html#cb592-9"></a>                          <span class="dt">alpha=</span><span class="kw">c</span>(<span class="fl">0.8</span>, <span class="fl">0.6</span>, <span class="fl">0.4</span>), <span class="dt">fill=</span><span class="st">&quot;grey86&quot;</span>) <span class="op">+</span></span>
<span id="cb592-10"><a href="custom-performance-metrics.html#cb592-10"></a><span class="st">    </span>ggplot2<span class="op">::</span><span class="kw">annotate</span>(<span class="dt">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="dt">x =</span> <span class="kw">c</span>(<span class="fl">0.25</span>, <span class="fl">0.6</span>, <span class="fl">1.25</span>), <span class="dt">y =</span> <span class="ot">Inf</span>, </span>
<span id="cb592-11"><a href="custom-performance-metrics.html#cb592-11"></a>                      <span class="dt">label =</span> <span class="kw">c</span>(<span class="st">&quot;Critical&quot;</span>, <span class="st">&quot;Cautious&quot;</span>, <span class="st">&quot;Healthy&quot;</span>) , </span>
<span id="cb592-12"><a href="custom-performance-metrics.html#cb592-12"></a>                      <span class="dt">color =</span> <span class="kw">c</span>(<span class="st">&#39;white&#39;</span>, <span class="st">&#39;darkgray&#39;</span>, <span class="st">&#39;darkgray&#39;</span>), </span>
<span id="cb592-13"><a href="custom-performance-metrics.html#cb592-13"></a>                      <span class="dt">size=</span><span class="dv">5</span>, <span class="dt">angle =</span> <span class="dv">270</span>, <span class="dt">hjust=</span><span class="op">-</span><span class="fl">0.25</span>)</span>
<span id="cb592-14"><a href="custom-performance-metrics.html#cb592-14"></a></span>
<span id="cb592-15"><a href="custom-performance-metrics.html#cb592-15"></a>}</span>
<span id="cb592-16"><a href="custom-performance-metrics.html#cb592-16"></a></span>
<span id="cb592-17"><a href="custom-performance-metrics.html#cb592-17"></a><span class="kw">NewPlot</span>(MSEobj)</span></code></pre></div>
<p><img src="userguide_files/figure-html/unnamed-chunk-215-1.png" width="672" /></p>
<pre><code>##          MP MeanB MeanF Satisificed
## 1       AvC  1.70  1.10        TRUE
## 2      DCAC  0.78  2.00        TRUE
## 3   FMSYref  1.00  0.98        TRUE
## 4      curE  1.60  0.90        TRUE
## 5 matlenlim  2.40  0.22        TRUE
## 6    MRreal  1.70  0.89        TRUE</code></pre>
<p><img src="userguide_files/figure-html/unnamed-chunk-215-2.png" width="672" /></p>
<!-- # Using Real Indices -->
<!-- Since DLMtool V5.3 real indices of abundance can be added to the Data object and used to condition the OM.  -->
<!-- Three types of real indices can provided: 'Biomass', 'VBiomass' and "SpBiomass" for total, vulnerable, and spawning biomass respectively.  -->
<!-- The type(s) of index is specified in `Data@Type` and the index provided as a vector of length `OM@nyears` in `Data@RInd`, or a matrix with nrow = number of indices and ncol = `OM@nyears`.  -->
<!-- The `Data` object with the real indices can be included in the operating model using the `cpars` slot. The information in the `Data@RInd` slot used in the MSE will match exactly the provided indices during the historical simulation period. The hyper-stability/depletion (beta) and observation error are calculated by comparing the real indices with the simulated indices during the historical year period and used to generate the `Data@RInd` in the projection period.  -->
<!-- For example, here we first generate some indices of abundance and then include those indices as real indices of abundance in the OM.  -->
<!-- First we generate three indices (total biomass, vulnerable biomass, and spawning biomass): -->
<!-- ```{r} -->
<!-- OM <- DLMtool::testOM -->
<!-- Hist <- runMSE(OM, Hist=TRUE, silent=TRUE) -->
<!-- Bind <- Hist@TSdata$B[1,] # use the first simulation as our 'real' data -->
<!-- Bind <- Bind/mean(Bind) -->
<!-- VBind <- Hist@TSdata$VB[1,] -->
<!-- VBind <- VBind/mean(VBind) -->
<!-- SpBInd<- Hist@TSdata$SSB[1,] -->
<!-- SpBInd <- SpBInd/mean(SpBInd) -->
<!-- ``` -->
<!-- Next we add these 'real' indices to a Data object: -->
<!-- ```{r} -->
<!-- Data <- new("Data") -->
<!-- Data@Type <- c("Biomass", "VBiomass", 'SpBiomass') -->
<!-- Data@RInd <- array(rbind(Bind, VBind, SpBInd), dim=c(1, 3, length(Bind))) -->
<!-- ``` -->
<!-- Note that `Data@RInd` is an array with dimensions: number of simulations (1 in this case because it is 'real' data), number of real indices (3 in this case), and the length of the longest index (all equal to `OM@nyears` in this case): -->
<!-- ```{r} -->
<!-- dim(Data@RInd) -->
<!-- ``` -->
<!-- Now we can add the Data object to our OM using the `cpars` slot: -->
<!-- ```{r} -->
<!-- OM@cpars$Data <- Data -->
<!-- ``` -->
<!-- And run the MSE (we use the argument `PPD=TRUE` here to return the simulated Data object at the end of the MSE): -->
<!-- ```{r} -->
<!-- MSE <- runMSE(OM, MPs="AvC", silent=TRUE, PPD=TRUE) -->
<!-- data <- MSE@Misc$Data[[1]] # the simulated data from the first MP -->
<!-- ``` -->
<!-- Note the dimensions of the `RInd` array in the simulated data: -->
<!-- ```{r} -->
<!-- dim(data@RInd) -->
<!-- ``` -->
<!-- The index is the same for every simulation for the historical years:  -->
<!-- ```{r} -->
<!-- all(data@RInd[1,,1:OM@nyears] == data@RInd[2,,1:OM@nyears]) -->
<!-- all(data@RInd[1,,1:OM@nyears] == data@RInd[OM@nsim,,1:OM@nyears]) -->
<!-- ``` -->
<!-- And identical to the real indices provided in the Data object: -->
<!-- ```{r} -->
<!-- all(Data@RInd[1,,] == data@RInd[OM@nsim,,1:OM@nyears]) -->
<!-- ``` -->
<!-- The hyper-stability/depletion coefficient (beta), auto-correlation, standard deviation, and correlation for each simulation and index are returned as a data frame in the `Misc` slot: -->
<!-- ```{r} -->
<!-- head(MSE@Misc$RInd.stats) -->
<!-- ``` -->
<!-- Note that in this case there is perfect correlation for simulation 1. This is not surprising because our 'real' indices were generated from simulation 1 of the same OM. Low or negative correlation values indicate that the simulated trends in abundance are very different from the real indices provided in the Data object. -->
<!-- The observation error stored in `RInd.stats` are used to maintain the same error structure in the projection simulations.  -->

<!-- # (PART\*) FAQ & TroubleShooting {-} -->
<!-- # Frequently Asked Questions -->
<!-- ## How are the biological reference points such as BMSY calculated? -->
<!-- For the historical simulations, the biological reference points (SSB0, BMSY, FMSY, etc) are calculated using the life-history and selectivity parameters averaged over a 10-year period around the current year. For example, the biological reference points at the end of the historical period are calculated from the average life-history and selectivity parameters from the last 5 years of the historical period and the first 5 years of the projection period. -->
<!-- B0, SSB0 and depletion in both the initial and final historical years are calculated from the life-history parameters at the end of the historical period (i.e. the 'current' year). -->
<!-- ## How is stock initialized in the first year?  -->
<!-- The stock is unfished in the initial year. The initial unfished age-structure is subject to recruitment variability and therefore the stock is not at an unfished equilibrium in the initial year, but rather distributed around B0. -->
<!-- ## Can I set the stock depletion level in the initial year?  -->
<!-- The initial depletion can be set using `cpars$initD`, which must be a vector of length `nsim` specifying the stock depletion for the initial year of the simulations. -->
<!-- ## Is the Data collected before or after fishing? -->
<!-- The index (`Data@Ind`), abundance (`Data@Abun` or `Data@SpAbun`), and depletion (`Data@Dep`) are calculated at the beginning of the year before fishing occurs. -->
<!-- ## What is the lag in data collection? -->
<!-- The Data object is populated with data from the previous year. A greater lag in some or all of the data sources can be specified with custom management procedures. -->
<!-- # TroubleShooting -->
<!-- ## OM Documentation -->
<!-- I'm getting the following error when I run `OMdoc()` (or something like it): -->
<!-- ```{} -->
<!-- Error in yaml::yaml.load(string, ...) : -->
<!--   Parser error: while parsing a block mapping at line 1, column 1 did not find expected key at line 1, column 16 -->
<!-- ``` -->
<!-- This is usually caused by a special character in the first few lines of the Rmarkdown file (eg in Title, Subtitle, Author(s), or Date). -->
<!-- A common culpit is a single apostrophe, usually used to indicate the possessive of a singular noun. -->
<!-- For example, the following will result in an error: -->
<!-- ```{} -->
<!-- # Title -->
<!-- Adrian's OM -->
<!-- ``` -->
<!-- The solution to this problem is to type two apostrophes in place of one: -->
<!-- ```{} -->
<!-- # Title -->
<!-- Adrian''s OM -->
<!-- ``` -->

</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="subsetting-the-mse-object.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="acknowledgements.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["userguide.pdf"],
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"<!--edit": "https://github.com/DLMtool/DLMtool_UserGuide/edit/master/%s-->"
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>

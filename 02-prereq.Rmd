# Prerequisites to Using DLMtool {#preq}

At the start of every session there are a few things to do: 
1. Load the DLMtool library. 
2. Make the data available. 
3. Set up parallel computing.

The following steps must be run every time the DLMtool is used in a new R session.

## Load the Library
At the beginning of every session you must load the DLMtool library:
```{r loadlibrary, message=FALSE, warning=FALSE}
library(DLMtool)
```

## Unpack the Data
A list object `DLMdat` is unpacked which puts all objects and data in the current workspace: 
```{r assignObjs}
for(i in 1:length(DLMdat)) assign(DLMdat[[i]]@Name, DLMdat[[i]])
```

## Initiate the Cluster
Note that most computers make use of hyperthreading technology so a quad-core PC has 8 threads.  Here we are using the `detectCores` function to calculate the number of available cores on the machine:

```{r sfinit, warning=FALSE}
sfInit(parallel=TRUE, cpus=detectCores()) 

```

## Export all Data and Objects to the Cluster 
In order to make all DLMtool functions and objects available for parallel processing we must export them to the cluster: 

```{r, eval}
sfExportAll()
```

## Set a Random Seed
In order to make results presented here reproducible, we set a random seed for this R session:
```{r seed}
set.seed(101) 
```

## Summary
The above steps need to be done each time you start a new instance of R/RStudio and use the DLMtool.  It is recommended that you start a new instance of R (by restarting RStudio) each time you begin a new analysis.

The code in the sections above is spread out and interspersed with explanation, which may make it appear much longer and more complicated than it really is.  There are five lines of code that need to be run each time you begin using the DLMtool:

```{r, eval=FALSE}
library(DLMtool)
for(i in 1:length(DLMdat)) assign(DLMdat[[i]]@Name, DLMdat[[i]])
sfInit(parallel=TRUE, cpus=detectCores())
sfExportAll()
set.seed(101) 
```

These lines can be copy-pasted into your R script, and should appear at the top so that they are run before anything else.


